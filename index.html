<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Universal PromptAssist — Glossary</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="topbar panel glass">
    <div class="top-left">
      <h1 class="title">🔬 COMPLETE HUMAN MICRO FEATURES</h1>
      <p class="subtitle">Master Glossary — Micro-granular features for prompt engineering</p>
    </div>

    <div class="prompt-tools">
      <div id="promptBox" class="prompt-box" contenteditable="true" aria-label="Prompt box" role="textbox" spellcheck="false">
        Your final, optimized description will appear here...
      </div>

      <div class="tools">
        <button id="randomBtn" class="btn neon">Random Character</button>
        <button id="optimizeBtn" class="btn neon">Optimize Prompt</button>
        <button id="copyBtn" class="btn">Copy</button>
        <button id="exportBtn" class="btn">Export JSON</button>
        <label class="toggle-ratio">
          <input id="includeRatios" type="checkbox">
          <span>Include ratios</span>
        </label>
      </div>
    </div>
  </header>

  <main class="main-grid">
    <aside class="left-panel panel glass" aria-label="Navigation">
      <div class="search-wrap">
        <input id="searchInput" class="search" placeholder="🔍 Search any feature from the complete glossary..." aria-label="Search features">
      </div>

      <h3>Feature Categories</h3>
      <div id="categoryList" class="category-list" role="list"></div>
    </aside>

    <section class="center-panel panel glass" aria-live="polite">
      <div id="selectedFeaturesContainer" class="selected-features">
        <h3>Selected Features</h3>
        <div id="selectedTags" class="tags"></div>
        <button id="clearAll" class="btn small">Clear All</button>
      </div>

      <div id="featureDisplay" class="feature-display">
        <h2 id="featureTitle">Selected Category</h2>
        <div id="subcategories" class="subcategories"></div>
      </div>
    </section>

    <aside class="right-panel panel glass">
      <h3>Body Ratio Sliders</h3>
      <div class="sliders">
        <label>Chest <span id="chestVal">50%</span>
          <input id="chest" type="range" min="20" max="95" value="50">
        </label>
        <label>Waist <span id="waistVal">35%</span>
          <input id="waist" type="range" min="15" max="80" value="35">
        </label>
        <label>Hips <span id="hipsVal">50%</span>
          <input id="hips" type="range" min="25" max="85" value="50">
        </label>
        <label>Shoulders <span id="shouldersVal">50%</span>
          <input id="shoulders" type="range" min="20" max="80" value="50">
        </label>
        <label>Legs <span id="legsVal">50%</span>
          <input id="legs" type="range" min="30" max="70" value="50">
        </label>
        <label>Muscle <span id="muscleVal">20%</span>
          <input id="muscle" type="range" min="5" max="95" value="20">
        </label>
      </div>

      <h3>Quick Actions</h3>
      <button id="applyRatios" class="btn small neon">Apply Ratios to Prompt</button>
      <button id="randomRatios" class="btn small">Randomize Ratios</button>
    </aside>
  </main>

  <footer class="foot panel glass">
    <small>Data loaded from separate files in <code>/data</code>. Add more JSON files and refresh.</small>
  </footer>

  <script src="glossary.js" defer></script>
  <script src="script.js" defer></script>
  <script>
document.addEventListener("DOMContentLoaded", () => {
  // Function to setup all collapsible feature containers
  const featureContainers = document.querySelectorAll(".item-container");

  featureContainers.forEach(container => {
    const toggle = document.createElement("button");
    toggle.classList.add("collapsible-toggle");
    toggle.textContent = "Show More";
    
    // Check if the container is taller than 160px (your visible limit)
    if (container.scrollHeight > 160) {
      container.after(toggle);
      toggle.style.display = "inline-flex";
    }

    // Handle toggle click
    toggle.addEventListener("click", () => {
      const isExpanded = container.classList.toggle("expanded");
      toggle.classList.toggle("expanded", isExpanded);
      toggle.textContent = isExpanded ? "Show Less" : "Show More";
    });
  });
});
</script>

  <script>
document.addEventListener("DOMContentLoaded", () => {
  const sliders = document.querySelectorAll(".slider-container input[type=range]");

  sliders.forEach(slider => {
    const badge = document.createElement("div");
    badge.classList.add("slider-badge");

    // Detect gender category (optional custom data attribute)
    const type = slider.dataset.type || "neutral";
    if (type === "feminine") badge.classList.add("feminine");
    else if (type === "masculine") badge.classList.add("masculine");

    slider.parentElement.appendChild(badge);

    const updateBadge = () => {
      const value = slider.value;
      const min = slider.min || 0;
      const max = slider.max || 100;
      const percent = ((value - min) / (max - min)) * 100;

      badge.style.left = `${percent}%`;
      badge.textContent = `${value}%`;
    };

    slider.addEventListener("input", () => {
      badge.classList.add("active");
      updateBadge();
    });

    slider.addEventListener("change", () => {
      badge.classList.remove("active");
    });

    updateBadge();
  });
});
</script>

</body>
</html>
